<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <canvas id="scene" width="800" height="600">
      Your browser doesn't appear to support the HTML5
      <code>&lt;canvas&gt;</code> element.
    </canvas>
    <div>
      <label for="cameraDist">
        Camera dist
        <input
          type="range"
          name="cameraDist"
          id="cameraDist"
          value="0"
          min="0"
          max="100"
        />
      </label>
      <label for="xRotate">
        x rotate
        <input
          type="range"
          name="xRotate"
          id="xRotate"
          value="0"
          min="0"
          max="360"
        />
      </label>
      <label for="yRotate">
        y rotate
        <input
          type="range"
          name="yRotate"
          id="yRotate"
          value="0"
          min="0"
          max="360"
        />
      </label>
      <label for="zRotate">
        z rotate
        <input
          type="range"
          name="zRotate"
          id="zRotate"
          value="0"
          min="0"
          max="360"
        />
      </label>
    </div>
    <script id="vertex-shader-2d" type="notjs">
      attribute vec3 a_vertexPosition;
      attribute vec3 a_vertexNormal;
      attribute vec2 a_vertexTextureCoords;

      uniform mat4 u_MVMatrix;
      uniform mat4 u_PMatrix;
      uniform mat4 u_NMatrix;

      uniform vec3 u_lightPosition;
      uniform vec3 u_ambientLightColor;
      uniform vec3 u_diffuseLightColor;
      uniform vec3 u_specularLightColor;

      varying vec2 vTextureCoords;
      varying vec3 vLightWeighting;

      const float shininess = 16.0;

      uniform mat4 u_matrix;

      void main() {
        a_vertexTextureCoords;
        u_NMatrix;
        vec4 vertexPositionEye4 = u_MVMatrix * vec4(a_vertexPosition, 1.0);
        vec3 vertexPositionEye3 = vertexPositionEye4.xyz / vertexPositionEye4.w;

        vec3 lightDirection = normalize(u_lightPosition - vertexPositionEye3);

        vec3 normal = normalize(mat3(u_NMatrix) * a_vertexNormal);

        float diffuseLightDot = max(dot(normal, lightDirection), 0.0);

        vec3 reflectionVector = normalize(reflect(-lightDirection, normal));

        vec3 viewVectorEye = -normalize(vertexPositionEye3);

        float specularLightDot = max(dot(reflectionVector, viewVectorEye), 0.0);

        float specularLightParam = pow(specularLightDot, shininess);

        vLightWeighting =
          u_ambientLightColor +
          u_diffuseLightColor *
          diffuseLightDot +
          u_specularLightColor * specularLightParam;



        gl_Position = u_PMatrix * u_MVMatrix * vec4(a_vertexPosition, 1);
      }
    </script>

    <script id="fragment-shader-2d" type="notjs">
      precision mediump float;
      varying vec2 vTextureCoords;
      varying vec3 vLightWeighting;
      void main() {
        gl_FragColor = vec4(vLightWeighting, 1.0) * vec4(1, 1, 1, 1);
      }
    </script>
    <script src="./dist/main.js"></script>
  </body>
</html>
